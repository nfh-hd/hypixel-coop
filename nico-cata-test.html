<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Catacombs XP Rechner</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #1e1e2f;
      color: #fff;
      text-align: center;
      padding: 20px;
    }
    .container {
      background: #2a2a40;
      padding: 20px;
      border-radius: 12px;
      max-width: 650px;
      margin: auto;
    }
    select, input, button {
      margin: 10px;
      padding: 8px;
      border-radius: 8px;
      border: none;
    }
    button {
      background: #4caf50;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #45a049;
    }
    .result {
      margin-top: 20px;
      padding: 15px;
      background: #33334d;
      border-radius: 10px;
      text-align: left;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Catacombs XP Rechner</h1>

    <label for="floor">Dungeon Floor:</label>
    <select id="floor">
      <option value="500">F1 (500 XP)</option>
      <option value="1000">F2 (1000 XP)</option>
      <option value="1500">F3 (1500 XP)</option>
      <option value="2500">F4 (2500 XP)</option>
      <option value="4000">F5 (4000 XP)</option>
      <option value="6000">F6 (6000 XP)</option>
      <option value="10000">F7 (10000 XP)</option>
      <option value="15000">M1 (15000 XP)</option>
      <option value="20000">M2 (20000 XP)</option>
      <option value="30000">M3 (30000 XP)</option>
      <option value="40000">M4 (40000 XP)</option>
      <option value="50000">M5 (50000 XP)</option>
      <option value="60000">M6 (60000 XP)</option>
      <option value="80000">M7 (80000 XP)</option>
    </select>
    <br>

    <label>
      <input type="checkbox" id="expRing"> 10% Dungeon Experience Ring
    </label>
    <br>

    <label for="level">Aktuelles Level:</label>
    <input type="number" id="level" min="1" max="50" value="1">
    <br>

    <label for="currentXp">Aktuelle XP (gesamt):</label>
    <input type="number" id="currentXp" value="0">
    <br>

    <label for="targetLevel">Ziel-Level:</label>
    <input type="number" id="targetLevel" min="1" max="50" value="50">
    <br>

    <button onclick="calculate()">Berechnen</button>

    <div class="result" id="result"></div>
  </div>

  <script>
    // XP-Tabelle (kumuliert) basierend auf dem Bild
    const catacombsXP = [
      0, 50, 125, 235, 395, 625, 955, 1425, 2095, 3045, 4385, 
      6275, 8940, 12700, 17960, 25340, 35640, 50040, 70040, 
      97640, 135640, 188140, 259640, 356640, 488640, 668640,
      911640, 1239640, 1684640, 2284640, 3084640, 4149640,
      5559640, 7459640, 9959640, 13259640, 17559640, 23159640,
      30359640, 39559640, 51559640, 66559640, 85559640, 109559640,
      139559640, 177559640, 225559640, 285559640, 360559640, 453559640,
      569809640
    ];

    function calculate() {
      const floorXp = parseInt(document.getElementById("floor").value);
      const hasRing = document.getElementById("expRing").checked;
      const currentLevel = parseInt(document.getElementById("level").value);
      const currentXp = parseInt(document.getElementById("currentXp").value);
      const targetLevel = parseInt(document.getElementById("targetLevel").value);

      // XP-Gewinn pro Run berechnen
      let xpGainPerRun = floorXp;
      if (hasRing) {
        xpGainPerRun = Math.floor(xpGainPerRun * 1.1);
      }

      // XP-Bedarf bis zum Ziellevel
      const targetXpTotal = catacombsXP[targetLevel - 1];
      const xpNeeded = Math.max(0, targetXpTotal - currentXp);
      const runsNeeded = Math.ceil(xpNeeded / xpGainPerRun);

      // Details für den Fortschritt im aktuellen Level
      const nextLevelXpTotal = catacombsXP[currentLevel];
      const xpForCurrentLevel = nextLevelXpTotal - catacombsXP[currentLevel - 1];
      const xpIntoCurrentLevel = currentXp - catacombsXP[currentLevel - 1];
      const progressPercent = (xpIntoCurrentLevel / xpForCurrentLevel) * 100;

      document.getElementById("result").innerHTML = `
        <p><b>XP Gewinn pro Run:</b> ${xpGainPerRun.toLocaleString()} XP</p>
        <p><b>Gesamt XP:</b> ${currentXp.toLocaleString()} XP</p>
        <p><b>Fortschritt aktuelles Level (${currentLevel}):</b> ${progressPercent.toFixed(2)}%</p>
        <p><b>Noch nötig bis Level ${targetLevel}:</b> ${xpNeeded.toLocaleString()} XP</p>
        <p><b>Ungefähr benötigte Runs bis Level ${targetLevel}:</b> ${runsNeeded.toLocaleString()} Runs</p>
      `;
    }
  </script>
</body>
</html>
